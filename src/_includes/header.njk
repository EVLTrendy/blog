<header>
    <div class="evl-navcontainer">
        <div class="evl-leftnav">
            <a href="https://www.evolvedlotus.com" aria-label="Home">
                <svg class="evl-SVGLogo" xmlns="http://www.w3.org/2000/svg" style="margin-left: 25px; margin-top: 10px" width="70px" height="75px" viewBox="0 0 403 321" version="1.1"><path d="M 198.494 47.662 C 184.289 64.114, 174.933 83.576, 169.817 107.312 C 166.653 121.987, 166.653 150.013, 169.817 164.688 C 175.050 188.966, 184.984 209.256, 199.838 226 L 203.829 230.500 207.971 226.500 C 220.991 213.925, 233.338 189.143, 238.638 164.947 C 241.293 152.828, 241.290 119.159, 238.633 107.027 C 236.467 97.136, 230.925 80.776, 227.294 73.553 C 221.667 62.360, 206.700 42, 204.098 42 C 203.704 42, 201.182 44.548, 198.494 47.662 M 134.708 58.750 C 131.901 67.256, 129.359 80.258, 128.727 89.332 C 128.373 94.422, 128.588 95.325, 130.411 96.423 C 131.560 97.114, 135.650 99.547, 139.500 101.829 C 143.350 104.110, 149.425 108.192, 153 110.899 L 159.500 115.821 161.197 107.265 C 163.174 97.297, 166.206 86.948, 169.615 78.538 L 172.032 72.576 168.849 70.038 C 159.330 62.449, 154.104 58.954, 146.630 55.181 C 142.074 52.882, 138.103 51, 137.806 51 C 137.508 51, 136.114 54.487, 134.708 58.750 M 262.473 55.279 C 255.154 59.127, 244.942 65.989, 239.261 70.876 L 237.023 72.802 239.408 78.195 C 242.608 85.431, 245.843 96.506, 247.886 107.217 L 249.567 116.029 256.033 111.070 C 259.590 108.343, 266.550 103.659, 271.500 100.662 L 280.500 95.214 280.234 89.357 C 280.087 86.136, 279.481 80.350, 278.887 76.500 C 277.759 69.197, 272.206 50.979, 271.124 51.029 C 270.781 51.045, 266.888 52.958, 262.473 55.279 M 68.485 98.667 C 72.809 150.574, 112.768 199.531, 164.500 216.302 C 173.287 219.151, 184.762 221.571, 185.584 220.749 C 185.872 220.461, 183.808 216.704, 180.997 212.399 C 171.873 198.421, 165.771 183.519, 161.889 165.732 C 159.773 156.038, 157.682 133.113, 158.586 129.513 C 159.031 127.738, 158.058 126.321, 153.823 122.578 C 132.337 103.587, 98.940 90.021, 73.632 90.004 L 67.763 90 68.485 98.667 M 318.555 91.614 C 298.632 95.210, 278.812 104.153, 261.144 117.518 L 250.500 125.570 249.857 138.535 C 248.457 166.786, 240.674 192.379, 227.291 212.733 C 225.206 215.905, 223.103 219.128, 222.618 219.896 C 220.211 223.710, 244.623 217.211, 259.719 210.020 C 287.865 196.613, 312.936 172.053, 326.907 144.203 C 334.553 128.963, 340 108.645, 340 95.369 L 340 90 333.250 90.090 C 329.538 90.139, 322.925 90.825, 318.555 91.614 M 51.208 126.071 C 45.441 126.820, 28.985 130.682, 28.195 131.471 C 27.659 132.007, 33.032 145.066, 35.819 150 C 39.567 156.635, 48.136 169, 48.988 169 C 49.393 169, 53.275 168.120, 57.613 167.045 C 61.951 165.970, 68.650 164.786, 72.500 164.414 C 76.350 164.041, 80.025 163.458, 80.666 163.118 C 81.459 162.698, 80.689 160.579, 78.262 156.500 C 74.289 149.822, 67.828 135.494, 65.923 129.138 C 64.527 124.478, 64.122 124.394, 51.208 126.071 M 344.396 130.750 C 343.411 133.912, 339.597 142.467, 335.919 149.760 C 328.357 164.760, 328.005 163.310, 339.500 164.533 C 342.800 164.884, 349.296 166.048, 353.935 167.120 L 362.370 169.068 364.616 166.284 C 371.573 157.658, 383.812 133.412, 382.082 131.682 C 380.726 130.326, 367.482 127.123, 358.654 126.016 C 345.826 124.407, 346.434 124.206, 344.396 130.750 M 67.500 173.588 C 51.606 176.385, 34.594 182.768, 22.722 190.388 L 16.944 194.097 18.722 197.217 C 22.189 203.301, 38.379 218.495, 48.725 225.374 C 72.327 241.068, 99.242 248.986, 129 248.990 C 150.334 248.993, 167.621 245.225, 185 236.782 L 195.500 231.681 191.500 230.883 C 189.300 230.444, 183.407 229.395, 178.404 228.551 C 160.775 225.579, 143.467 218.511, 127.052 207.583 C 114.953 199.529, 102.199 188.378, 94.549 179.166 L 88.599 172 82.049 172.090 C 78.447 172.139, 71.900 172.813, 67.500 173.588 M 316 176.618 C 310.151 184.210, 293.654 199.333, 284.039 205.919 C 266.063 218.231, 245.202 226.522, 224.500 229.583 C 219 230.396, 214.050 231.204, 213.500 231.378 C 212.073 231.830, 230.265 240.354, 238 242.857 C 250.125 246.780, 258.462 248.088, 275 248.662 C 289.032 249.148, 293.351 248.917, 303.871 247.117 C 325.158 243.476, 342.652 236.634, 360 225.162 C 369.465 218.903, 382.203 207.216, 387.657 199.786 C 391.114 195.077, 391.174 194.849, 389.453 192.948 C 386.669 189.872, 364.357 179.340, 355.551 176.945 C 345.207 174.132, 331.913 171.999, 325 172.042 C 319.669 172.075, 319.393 172.215, 316 176.618" stroke="none" fill="#050505" fill-rule="evenodd"/></svg>
            </a>
        </div>
        <div class="evl-rightnav">
            <!-- Desktop Navigation -->
            <div class="evl-navtxtgroup desktop-only">
                <div class="evl-navdivtxt">
                    <a href="https://www.evolvedlotus.com">
                        <span class="evl-navtxt">{% if lang == 'es' %}Inicio{% elif lang == 'fr' %}Accueil{% else %}Home{% endif %}</span>
                    </a>
                </div>
                <div class="evl-navdivtxt">
                    <a href="https://blog.evolvedlotus.com/about/">
                        <span class="evl-navtxt">{% if lang == 'es' %}Sobre nosotros{% elif lang == 'fr' %}À propos{% else %}About{% endif %}</span>
                    </a>
                </div>
                <div class="evl-navdivtxt">
                    <a href="https://www.evolvedlotus.com/#cusection">
                        <span class="evl-navtxt">{% if lang == 'es' %}Contacto{% elif lang == 'fr' %}Contact{% else %}Contact Us{% endif %}</span>
                    </a>
                </div>
                <div class="evl-navdivtxt">
                    <a href="https://tools.evolvedlotus.com/">
                        <span class="evl-navtxt">{% if lang == 'es' %}Herramientas{% elif lang == 'fr' %}Outils{% else %}Tools{% endif %}</span>
                    </a>
                </div>
                <div class="evl-navdivtxt">
                    <a href="https://whop.com/evolvedlotus">
                        <span class="evl-navtxt">Shop</span>
                    </a>
                </div>
                <div class="evl-navdivtxt">
                    <a href="https://blog.evolvedlotus.com">
                        <span class="evl-navtxt">Blog</span>
                    </a>
                </div>
            </div>

            <!-- Header Icons (Search, Settings, Mobile Menu) -->
            <div class="header-icons">
                <!-- Search Button -->
                <button id="header-search-btn" class="icon-btn" aria-label="Search">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="11" cy="11" r="8"></circle>
                        <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                    </svg>
                </button>

                <!-- Settings Dropdown -->
                <div class="settings-dropdown-wrapper">
                    <button id="header-settings-btn" class="icon-btn" aria-label="Settings">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="12" cy="12" r="3"></circle>
                            <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
                        </svg>
                    </button>
                    <!-- Settings Panel -->
                    <div id="header-settings-panel" class="settings-panel">
                        <!-- Dark Mode Toggle -->
                        <div class="setting-item">
                            <span class="setting-label">Dark Mode</span>
                            <button id="dark-mode-toggle" class="toggle-switch" aria-label="Toggle dark mode">
                                <svg class="sun-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <circle cx="12" cy="12" r="5"></circle>
                                    <line x1="12" y1="1" x2="12" y2="3"></line>
                                    <line x1="12" y1="21" x2="12" y2="23"></line>
                                    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                                    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                                    <line x1="1" y1="12" x2="3" y2="12"></line>
                                    <line x1="21" y1="12" x2="23" y2="12"></line>
                                    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                                    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                                </svg>
                                <svg class="moon-icon" style="display: none;" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                                </svg>
                            </button>
                        </div>
                        <!-- Language Switcher -->
                        <div class="setting-item">
                            <span class="setting-label">Language</span>
                            <div class="language-switcher">
                                {% set cleanUrl = page.url | replace('/es/', '/') | replace('/fr/', '/') %}
                                <a href="{{ cleanUrl }}" class="lang-link {% if lang == 'en' %}active{% endif %}" aria-label="English">EN</a>
                                <a href="/es{{ cleanUrl }}" class="lang-link {% if lang == 'es' %}active{% endif %}" aria-label="Español">ES</a>
                                <a href="/fr{{ cleanUrl }}" class="lang-link {% if lang == 'fr' %}active{% endif %}" aria-label="Français">FR</a>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Mobile Menu Button -->
                <button id="mobile-menu-btn" class="icon-btn mobile-only" aria-label="Menu">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <line x1="3" y1="12" x2="21" y2="12"></line>
                        <line x1="3" y1="6" x2="21" y2="6"></line>
                        <line x1="3" y1="18" x2="21" y2="18"></line>
                    </svg>
                </button>
            </div>
        </div>
    </div>

    <!-- Mobile Menu Overlay -->
    <div id="mobile-menu-overlay" class="mobile-menu-overlay">
        <div class="mobile-menu-content">
            <button id="mobile-menu-close" class="mobile-menu-close" aria-label="Close Menu">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <line x1="18" y1="6" x2="6" y2="18"></line>
                    <line x1="6" y1="6" x2="18" y2="18"></line>
                </svg>
            </button>
            <nav class="mobile-nav-links">
                <a href="https://www.evolvedlotus.com">{% if lang == 'es' %}Inicio{% elif lang == 'fr' %}Accueil{% else %}Home{% endif %}</a>
                <a href="https://blog.evolvedlotus.com/about/">{% if lang == 'es' %}Sobre nosotros{% elif lang == 'fr' %}À propos{% else %}About{% endif %}</a>
                <a href="https://www.evolvedlotus.com/#cusection">{% if lang == 'es' %}Contacto{% elif lang == 'fr' %}Contact{% else %}Contact Us{% endif %}</a>
                <a href="https://tools.evolvedlotus.com/">{% if lang == 'es' %}Herramientas{% elif lang == 'fr' %}Outils{% else %}Tools{% endif %}</a>
                <a href="https://whop.com/evolvedlotus">Shop</a>
                <a href="https://blog.evolvedlotus.com">Blog</a>
            </nav>
        </div>
    </div>

    <!-- Search Overlay -->
    <div id="search-overlay" class="search-overlay">
        <div class="search-overlay-content">
            <button id="search-close-btn" class="search-close-btn" aria-label="Close Search">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <line x1="18" y1="6" x2="6" y2="18"></line>
                    <line x1="6" y1="6" x2="18" y2="18"></line>
                </svg>
            </button>
            <div class="search-input-wrapper">
                <input type="text" id="global-search-input" placeholder="Search articles..." autocomplete="off">
            </div>
            <div id="global-search-results" class="global-search-results"></div>
        </div>
    </div>
</header>

<style>
/* Header Layout */
.evl-navcontainer {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px 20px;
    background: white;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    position: relative;
    z-index: 100;
}

.evl-leftnav {
    flex: 0 0 auto;
}

.evl-rightnav {
    display: flex;
    align-items: center;
    gap: 20px;
}

.evl-navtxtgroup.desktop-only {
    display: flex;
    gap: 15px;
}

.header-icons {
    display: flex;
    align-items: center;
    gap: 15px;
}

/* Navigation Text - ALWAYS BLACK */
.evl-navtxt {
    color: #000000 !important;
    text-decoration: none;
    font-weight: 500;
    transition: opacity 0.3s;
}

.evl-navtxt:hover {
    opacity: 0.7;
}

.evl-navdivtxt a {
    color: #000000 !important;
    text-decoration: none;
}

.icon-btn {
    background: none;
    border: none;
    cursor: pointer;
    padding: 5px;
    color: #333;
    transition: color 0.3s;
    display: flex;
    align-items: center;
    justify-content: center;
}

.icon-btn:hover {
    color: #33bdef;
}

/* Settings Dropdown */
.settings-dropdown-wrapper {
    position: relative;
}

.settings-panel {
    position: absolute;
    top: 100%;
    right: 0;
    margin-top: 10px;
    background: white;
    border: 1px solid #eee;
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    padding: 15px;
    min-width: 200px;
    display: none;
    z-index: 101;
}

.settings-panel.active {
    display: block;
}

.setting-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 10px;
    padding-bottom: 10px;
    border-bottom: 1px solid #eee;
}

.setting-item:last-child {
    margin-bottom: 0;
    padding-bottom: 0;
    border-bottom: none;
}

.setting-label {
    font-weight: 600;
    font-size: 14px;
}

/* Toggle Switch */
.toggle-switch {
    background: none;
    border: 1px solid #ddd;
    border-radius: 20px;
    padding: 5px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 24px;
}

/* Language Switcher */
.language-switcher {
    display: flex;
    gap: 5px;
}

.lang-link {
    text-decoration: none;
    color: #666;
    font-size: 12px;
    padding: 2px 5px;
    border: 1px solid #ddd;
    border-radius: 4px;
}

.lang-link.active {
    background: #33bdef;
    color: white;
    border-color: #33bdef;
}

/* Mobile Menu */
.mobile-menu-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.5);
    z-index: 200;
    display: none;
}

.mobile-menu-overlay.active {
    display: block;
}

.mobile-menu-content {
    position: absolute;
    top: 0;
    right: 0;
    width: 250px;
    height: 100%;
    background: white;
    padding: 20px;
    transform: translateX(100%);
    transition: transform 0.3s ease;
}

.mobile-menu-overlay.active .mobile-menu-content {
    transform: translateX(0);
}

.mobile-menu-close {
    background: none;
    border: none;
    cursor: pointer;
    float: right;
    margin-bottom: 20px;
}

.mobile-nav-links {
    display: flex;
    flex-direction: column;
    gap: 15px;
    clear: both;
}

.mobile-nav-links a {
    text-decoration: none;
    color: #333;
    font-size: 18px;
    font-weight: 500;
}

/* Search Overlay */
.search-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(255,255,255,0.95);
    z-index: 300;
    display: none;
    justify-content: center;
    padding-top: 100px;
}

.search-overlay.active {
    display: flex;
}

.search-overlay-content {
    width: 100%;
    max-width: 600px;
    position: relative;
    padding: 0 20px;
}

.search-close-btn {
    position: absolute;
    top: -60px;
    right: 20px;
    background: none;
    border: none;
    cursor: pointer;
}

.search-input-wrapper input {
    width: 100%;
    padding: 15px 20px;
    font-size: 24px;
    border: none;
    border-bottom: 2px solid #33bdef;
    background: transparent;
    outline: none;
}

.global-search-results {
    margin-top: 30px;
    max-height: 60vh;
    overflow-y: auto;
}

.search-result-item {
    padding: 15px;
    border-bottom: 1px solid #eee;
    cursor: pointer;
}

.search-result-item:hover {
    background: #f9f9f9;
}

.search-result-title {
    font-size: 18px;
    margin: 0 0 5px 0;
    color: #33bdef;
}

.search-result-description {
    font-size: 14px;
    color: #666;
    margin: 0;
}

/* Responsive */
.mobile-only {
    display: none;
}

@media (max-width: 768px) {
    .desktop-only {
        display: none !important;
    }
    .mobile-only {
        display: flex !important;
    }
}

/* Dark Mode Overrides */
[data-theme="dark"] .evl-navcontainer,
[data-theme="dark"] .settings-panel,
[data-theme="dark"] .mobile-menu-content {
    background: #1e293b;
    color: #e2e8f0;
}

/* Navigation text ALWAYS stays black */
[data-theme="dark"] .evl-navtxt,
[data-theme="dark"] .evl-navdivtxt a {
    color: #000000 !important;
}

[data-theme="dark"] .icon-btn {
    color: #e2e8f0;
}

[data-theme="dark"] .mobile-nav-links a {
    color: #e2e8f0;
}

[data-theme="dark"] .search-overlay {
    background: rgba(30, 41, 59, 0.95);
}

[data-theme="dark"] .search-input-wrapper input {
    color: #e2e8f0;
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // --- Settings Dropdown ---
    const settingsBtn = document.getElementById('header-settings-btn');
    const settingsPanel = document.getElementById('header-settings-panel');
    
    if (settingsBtn && settingsPanel) {
        settingsBtn.addEventListener('click', function(e) {
            e.stopPropagation();
            settingsPanel.classList.toggle('active');
        });

        document.addEventListener('click', function(e) {
            if (!settingsPanel.contains(e.target) && !settingsBtn.contains(e.target)) {
                settingsPanel.classList.remove('active');
            }
        });

        // Prevent closing when clicking inside panel
        settingsPanel.addEventListener('click', function(e) {
            e.stopPropagation();
        });
    }

    // --- Dark Mode ---
    const darkModeToggle = document.getElementById('dark-mode-toggle');
    const html = document.documentElement;
    const sunIcon = document.querySelector('.sun-icon');
    const moonIcon = document.querySelector('.moon-icon');

    // Check saved preference
    if (localStorage.getItem('darkMode') === 'dark') {
        html.setAttribute('data-theme', 'dark');
        if(sunIcon) sunIcon.style.display = 'none';
        if(moonIcon) moonIcon.style.display = 'block';
    }

    if (darkModeToggle) {
        darkModeToggle.addEventListener('click', function() {
            const isDark = html.getAttribute('data-theme') === 'dark';
            if (isDark) {
                html.setAttribute('data-theme', 'light');
                localStorage.setItem('darkMode', 'light');
                if(sunIcon) sunIcon.style.display = 'block';
                if(moonIcon) moonIcon.style.display = 'none';
            } else {
                html.setAttribute('data-theme', 'dark');
                localStorage.setItem('darkMode', 'dark');
                if(sunIcon) sunIcon.style.display = 'none';
                if(moonIcon) moonIcon.style.display = 'block';
            }
        });
    }

    // --- Mobile Menu ---
    const mobileMenuBtn = document.getElementById('mobile-menu-btn');
    const mobileMenuOverlay = document.getElementById('mobile-menu-overlay');
    const mobileMenuClose = document.getElementById('mobile-menu-close');

    if (mobileMenuBtn && mobileMenuOverlay) {
        mobileMenuBtn.addEventListener('click', function() {
            mobileMenuOverlay.classList.add('active');
        });
        
        mobileMenuClose.addEventListener('click', function() {
            mobileMenuOverlay.classList.remove('active');
        });

        mobileMenuOverlay.addEventListener('click', function(e) {
            if (e.target === mobileMenuOverlay) {
                mobileMenuOverlay.classList.remove('active');
            }
        });
    }

    // --- Search Overlay ---
    const searchBtn = document.getElementById('header-search-btn');
    const searchOverlay = document.getElementById('search-overlay');
    const searchClose = document.getElementById('search-close-btn');
    const searchInput = document.getElementById('global-search-input');
    const searchResults = document.getElementById('global-search-results');

    // Blog Posts Data (Injected from Nunjucks)
    const blogPosts = [
        {% for post in collections.blog %}
        {
            title: "{{ post.data.title | replace('"', '\\"') }}",
            url: "{{ post.url }}",
            description: "{{ post.data.description | replace('"', '\\"') | truncate(100) }}",
            date: "{{ post.date | postDate }}"
        }{% if not loop.last %},{% endif %}
        {% endfor %}
    ];

    if (searchBtn && searchOverlay) {
        searchBtn.addEventListener('click', function() {
            searchOverlay.classList.add('active');
            setTimeout(() => searchInput.focus(), 100);
        });

        searchClose.addEventListener('click', function() {
            searchOverlay.classList.remove('active');
        });

        // Search Logic
        searchInput.addEventListener('input', function(e) {
            const query = e.target.value.toLowerCase();
            if (query.length < 2) {
                searchResults.innerHTML = '';
                return;
            }

            const matches = blogPosts.filter(post => 
                post.title.toLowerCase().includes(query) || 
                post.description.toLowerCase().includes(query)
            ).slice(0, 10);

            if (matches.length > 0) {
                searchResults.innerHTML = matches.map(post => `
                    <div class="search-result-item" onclick="window.location.href='${post.url}'">
                        <h4 class="search-result-title">${post.title}</h4>
                        <p class="search-result-description">${post.description}</p>
                    </div>
                `).join('');
            } else {
                searchResults.innerHTML = '<div style="text-align:center; color:#666;">No results found</div>';
            }
        });
    }
});
</script>
