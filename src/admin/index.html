<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="robots" content="noindex, nofollow" />
  <title>EvolvedLotus Content Manager</title>
  <link rel="canonical" href="https://blog.evolvedlotus.com/admin/" />
  <link rel="icon" href="/assets/blog/favicon.ico" type="image/x-icon" />

  <!-- Netlify Identity Widget -->
  <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&family=Inter:wght@300;400;500;600&display=swap"
    rel="stylesheet">

  <style>
    /* ============================================
       MINIMALIST LIGHT CMS THEME
       ============================================ */

    :root {
      --font-heading: 'Outfit', sans-serif;
      --font-body: 'Inter', sans-serif;
      --color-primary: #0ea5e9;
      --color-bg: #f8fafc;
      --color-surface: #ffffff;
      --color-text: #0f172a;
      --color-border: #e2e8f0;
    }

    body {
      font-family: var(--font-body) !important;
      background-color: var(--color-bg) !important;
      color: var(--color-text) !important;
      -webkit-font-smoothing: antialiased;
      margin: 0;
    }

    /* Typography Overrides */
    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
      font-family: var(--font-heading) !important;
    }

    /* CMS UI Overrides - targeted and minimal */
    div[class*="SidebarContainer"] {
      background-color: var(--color-surface) !important;
      border-right: 1px solid var(--color-border) !important;
    }

    a[class*="SidebarNavLink"] {
      border-radius: 6px !important;
      margin: 4px 8px !important;
    }

    a[class*="SidebarNavLink"][class*="active"] {
      background-color: var(--color-primary) !important;
      color: white !important;
    }

    main {
      background-color: var(--color-bg) !important;
    }

    div[class*="EntryCard"] {
      background: var(--color-surface) !important;
      border: 1px solid var(--color-border) !important;
      border-radius: 8px !important;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05) !important;
      margin-bottom: 12px !important;
    }

    div[class*="CollectionTop"] {
      background: transparent !important;
      border: none !important;
      box-shadow: none !important;
      padding: 20px 0 !important;
    }

    button[class*="Button"] {
      border-radius: 6px !important;
      font-family: var(--font-heading) !important;
      font-weight: 500 !important;
      text-transform: none !important;
    }

    input,
    textarea,
    select {
      border-radius: 6px !important;
      border: 1px solid var(--color-border) !important;
      background: var(--color-surface) !important;
      padding: 8px 12px !important;
    }

    input:focus,
    textarea:focus,
    select:focus {
      border-color: var(--color-primary) !important;
      box-shadow: 0 0 0 2px rgba(14, 165, 233, 0.2) !important;
      outline: none !important;
    }

    /* Footer Navigation */
    .cms-footer {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: rgba(255, 255, 255, 0.9);
      backdrop-filter: blur(8px);
      border-top: 1px solid var(--color-border);
      padding: 10px;
      display: flex;
      justify-content: center;
      gap: 20px;
      z-index: 1000;
    }

    .cms-footer a {
      color: #64748b;
      text-decoration: none;
      font-size: 13px;
      font-weight: 500;
      display: flex;
      align-items: center;
      gap: 6px;
      padding: 6px 12px;
      border-radius: 20px;
      transition: all 0.2s;
    }

    .cms-footer a:hover {
      background: #f1f5f9;
      color: var(--color-primary);
    }

    ::-webkit-scrollbar {
      width: 8px;
    }

    ::-webkit-scrollbar-track {
      background: transparent;
    }

    ::-webkit-scrollbar-thumb {
      background: #cbd5e1;
      border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: #94a3b8;
    }
  </style>
</head>

<body>
  <!-- Decap CMS -->
  <script src="https://unpkg.com/decap-cms@^3.0.0/dist/decap-cms.js"></script>

  <!-- Register Preview Styles -->
  <script>
    CMS.registerPreviewStyle("/style.css");

    // Simple Preview Template
    CMS.registerPreviewTemplate("blog", ({ entry, widgetFor }) => {
      const data = entry.getIn(['data']).toJS();
      return `
        <div style="max-width: 800px; margin: 40px auto; padding: 0 20px; font-family: 'Inter', sans-serif;">
          <h1 style="font-size: 2.5rem; font-weight: 700; color: #0f172a; margin-bottom: 1rem;">${data.title}</h1>
          <div style="font-size: 1.1rem; line-height: 1.7; color: #334155;">
            ${widgetFor('body')}
          </div>
        </div>
      `;
    });

    // Manual Init to bypass config.yml caching issues
    var config = {
      backend: {
        name: 'git-gateway',
        branch: 'main',
      },
      publish_mode: 'simple',
      media_folder: 'src/assets/blog',
      public_folder: '/assets/blog',
      collections: [
        {
          name: 'notifications',
          label: 'Notifications',
          folder: 'src/notifications',
          create: true,
          slug: '{{year}}-{{month}}-{{day}}-{{slug}}',
          fields: [
            { label: 'Title', name: 'title', widget: 'string' },
            { label: 'Description', name: 'description', widget: 'text' },
            { label: 'Link', name: 'link', widget: 'string', required: false },
            { label: 'Date', name: 'date', widget: 'datetime' },
            { label: 'Tags', name: 'tags', widget: 'hidden', default: 'notifications' }
          ]
        },
        {
          name: 'blog',
          label: 'Blog',
          folder: 'src/blog',
          create: true,
          slug: '{{year}}-{{month}}-{{day}}-{{slug}}',
          fields: [
            { label: 'Title', name: 'title', widget: 'string' },
            { label: 'Description', name: 'description', widget: 'text' },
            { label: 'Author', name: 'author', widget: 'string', default: 'EvolvedLotus Team' },
            { label: 'Date', name: 'date', widget: 'datetime' },
            { label: 'Tags', name: 'tags', widget: 'list', default: ['post'] },
            { label: 'Featured Image', name: 'image', widget: 'image' },
            { label: 'Image Alt Text', name: 'imageAlt', widget: 'string' },
            { label: 'Keywords', name: 'keywords', widget: 'string', required: false },
            { label: 'Category', name: 'category', widget: 'string', required: false },
            { label: 'Featured', name: 'featured', widget: 'boolean', default: false, required: false },
            { label: 'Schema Type', name: 'schema_type', widget: 'string', default: 'Article', required: false },
            { label: 'OG Type', name: 'og_type', widget: 'string', default: 'article', required: false },
            { label: 'Body', name: 'body', widget: 'markdown' }
          ]
        }
      ]
    };

    CMS.init({ config: config });
  </script>

  <!-- Footer Navigation -->
  <div class="cms-footer">
    <a href="/" target="_blank">üè† Home</a>
    <a href="/blog/" target="_blank">üìù Blog</a>
    <a href="/admin/#/collections/blog">‚úçÔ∏è Write</a>
    <a href="/admin/#/collections/pages">üìÑ Pages</a>
    <a href="/admin/#/collections/settings">‚öôÔ∏è Settings</a>
  </div>
</body>

</html>